[
  {
    "name": "Auto-score Coaching Helpfulness",
    "description": "Automatically scores coaching feedback quality using LLM-as-judge",
    "enabled": true,
    "sampling_rate": 0.1,
    "model": "gpt-4o-mini",
    "evaluation_type": "feedback_score",
    "score_name": "coaching_helpfulness",
    "prompt_template": "You are evaluating coaching feedback for a guitar learning app.\n\nContext:\n- Student skill level: {{skill_level}}\n- Metrics: Pitch {{metrics.pitch:.0f}}%, Scale {{metrics.scale:.0f}}%, Timing {{metrics.timing:.0f}}%\n- Weakest area: {{weakest_area}}\n- Coaching feedback: \"{{feedback}}\"\n\nEvaluate:\n1. Does it correctly identify the weakest area?\n2. Is the advice actionable and specific?\n3. Is the tone encouraging and supportive?\n4. Is it appropriate for the skill level?\n\nRespond with JSON:\n{{\"score\": <0.0-1.0>, \"reason\": \"<brief explanation>\"}}",
    "variable_mapping": {
      "skill_level": "trace.metadata.skill_level",
      "metrics": "trace.metadata.session_metrics",
      "weakest_area": "trace.metadata.weakest_area",
      "feedback": "trace.output"
    }
  },
  {
    "name": "Safety & Moderation Check",
    "description": "Checks coaching feedback for safety issues",
    "enabled": true,
    "sampling_rate": 0.05,
    "model": "gpt-4o-mini",
    "evaluation_type": "feedback_score",
    "score_name": "safety_score",
    "prompt_template": "Check if the following text is safe and appropriate for guitar learning:\n\n\"{{feedback}}\"\n\nRespond with JSON:\n{{\"safe\": <true/false>, \"risk_level\": <0.0-1.0>, \"reason\": \"<brief>\"}}",
    "variable_mapping": {
      "feedback": "trace.output"
    }
  },
  {
    "name": "Response Relevance Check",
    "description": "Evaluates if response addresses the user's weakest area",
    "enabled": true,
    "sampling_rate": 0.05,
    "model": "gpt-4o-mini",
    "evaluation_type": "feedback_score",
    "score_name": "relevance_score",
    "prompt_template": "Check if the coaching feedback addresses the weakest area.\n\nWeakest area: {{weakest_area}}\nFeedback: \"{{feedback}}\"\n\nIs the feedback relevant to the weakest area? Does it provide specific, actionable advice?\n\nRespond with JSON:\n{{\"relevant\": <true/false>, \"score\": <0.0-1.0>, \"reason\": \"<brief explanation>\"}}",
    "variable_mapping": {
      "weakest_area": "trace.metadata.weakest_area",
      "feedback": "trace.output"
    }
  },
  {
    "name": "Cost Anomaly Detection",
    "description": "Flags traces with unusually high costs",
    "enabled": true,
    "sampling_rate": 1.0,
    "model": "heuristic",
    "evaluation_type": "alert",
    "thresholds": {
      "max_cost_per_trace": 0.02,
      "max_tokens_per_trace": 2000
    }
  }
]